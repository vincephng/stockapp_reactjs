{"ast":null,"code":"import _regeneratorRuntime from \"/Users/vinceng/Downloads/Code Place /stock_react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/vinceng/Downloads/Code Place /stock_react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/Users/vinceng/Downloads/Code Place /stock_react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/vinceng/Downloads/Code Place /stock_react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/Users/vinceng/Downloads/Code Place /stock_react/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/vinceng/Downloads/Code Place /stock_react/frontend/src/component/Login.js\";\n\nimport \"../style/login.css\";\nimport React, { useState, useEffect } from \"react\";\nimport fear from \"../pics/Feelthefear.jpg\";\nimport history from \"../routes/history\";\nimport axios from \"axios\";\nexport var LoginForm = function LoginForm(props) {\n  var _useState = useState({\n    username: \"\",\n    password: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      userLogin = _useState2[0],\n      setUserLogin = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      isSubmit = _useState4[0],\n      setIsSubmit = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      errorUserName = _useState6[0],\n      setErrorUserName = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      errorPW = _useState8[0],\n      setErrorPW = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      errorServer = _useState10[0],\n      setErrorServer = _useState10[1];\n\n  var handleOnChange = function handleOnChange(e) {\n    var name = e.target.name;\n    var value = e.target.value;\n    setUserLogin(_objectSpread({}, userLogin, _defineProperty({}, name, value)));\n    setErrorPW(\"\");\n    setErrorUserName(\"\");\n    setErrorServer(\"\");\n  };\n\n  var handleOnSubmit = function handleOnSubmit(submit) {\n    submit.preventDefault();\n    checkValid();\n    var UserLogin = userLogin;\n    var isSend = isSubmit;\n\n    if (isSend) {\n      axios.defaults.withCredentials = true;\n      axios.post(\"http://localhost:3001/stock/app/login\", UserLogin).then(function (res) {\n        getUserContext();\n      }).catch(function (err) {\n        setErrorServer(err.response.data.message);\n      });\n    }\n  };\n\n  var getUserContext = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              axios.defaults.withCredentials = true;\n              _context.next = 3;\n              return axios.get(\"http://localhost:3001/app/user/data\").then(function (res) {\n                localStorage.setItem(\"UserData\", JSON.stringify(res.data));\n                history.push({\n                  pathname: '/user/home'\n                });\n              }).catch(function (err) {\n                return console.log(err);\n              });\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function getUserContext() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var checkValid = function checkValid() {\n    if (!userLogin.username.trim()) {\n      setErrorUserName(\"Username required\");\n    }\n\n    if (!userLogin.password) {\n      setErrorPW(\"Password is required\");\n    } else if (userLogin.password.length < 6) {\n      setErrorPW(\"Password needs to be 6 characters or more\");\n    } else {\n      setIsSubmit(true);\n    }\n  };\n\n  if (!props.show) {\n    return null;\n  } else {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formlg-overlay\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formlg-container\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"close-btn\",\n      onClick: props.onClose,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }\n    }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formlg-content-left\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"formlg-img\",\n      src: fear,\n      alt: \"space people\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formlg-content-right\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: handleOnSubmit,\n      className: \"formlg\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formlg-title\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 15\n      }\n    }, \"User Login\"), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 15\n      }\n    }, \"Welcome to the website\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 16\n      }\n    }, errorServer)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formlg-inputs\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"formlg-label\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 15\n      }\n    }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-input\",\n      name: \"username\",\n      placeholder: \"email or username\" // value= {this.state.username}\n      ,\n      onChange: handleOnChange,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 16\n      }\n    }, errorUserName)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"formlg-inputs\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"formlg-label\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 15\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"formlg-input\",\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"enter your password\" // value= {this.state.password}\n      ,\n      onChange: handleOnChange,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 16\n      }\n    }, errorPW)), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"formlg-input-btn\",\n      type: \"submit\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }\n    }, \"Sign in\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"formlg-input-fgpw\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, \"Forgot Password?\"))))));\n  }\n};","map":{"version":3,"sources":["/Users/vinceng/Downloads/Code Place /stock_react/frontend/src/component/Login.js"],"names":["React","useState","useEffect","fear","history","axios","LoginForm","props","username","password","userLogin","setUserLogin","isSubmit","setIsSubmit","errorUserName","setErrorUserName","errorPW","setErrorPW","errorServer","setErrorServer","handleOnChange","e","name","target","value","handleOnSubmit","submit","preventDefault","checkValid","UserLogin","isSend","defaults","withCredentials","post","then","res","getUserContext","catch","err","response","data","message","get","localStorage","setItem","JSON","stringify","push","pathname","console","log","trim","length","show","onClose"],"mappings":"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","sourcesContent":["import \"../style/login.css\";\nimport React, {useState, useEffect } from \"react\";\nimport fear from \"../pics/Feelthefear.jpg\";\nimport history from \"../routes/history\";\nimport axios from \"axios\";\nexport const LoginForm = (props) => {\n  const [userLogin, setUserLogin] = useState({ username: \"\", password: \"\" });\n  const [isSubmit, setIsSubmit] = useState(false);\n  const [errorUserName, setErrorUserName] = useState(\"\");\n  const [errorPW, setErrorPW] = useState(\"\");\n  const [errorServer, setErrorServer] = useState(\"\");\n  \n\n\n  const handleOnChange = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setUserLogin({ ...userLogin, [name]: value });\n    setErrorPW(\"\");\n    setErrorUserName(\"\");\n    setErrorServer(\"\")\n  };\n  const handleOnSubmit = (submit) => {\n    submit.preventDefault();\n    checkValid();\n    const UserLogin = userLogin;\n    const isSend = isSubmit;\n\n    if (isSend) {\n      axios.defaults.withCredentials = true;\n      axios\n        .post(\"http://localhost:3001/stock/app/login\", UserLogin)\n        .then((res) => {\n          getUserContext()\n        })\n        .catch((err) => {\n          setErrorServer(err.response.data.message);\n        });\n    }\n   \n  };\n  const getUserContext = async () => {\n    axios.defaults.withCredentials = true;\n    await axios\n      .get(\"http://localhost:3001/app/user/data\")\n      .then((res) => {\n        localStorage.setItem(\"UserData\", JSON.stringify(res.data));\n        history.push({pathname:'/user/home'})\n      })\n      .catch((err) => console.log(err));\n\n    \n  };\n  const checkValid = () => {\n    if (!userLogin.username.trim()) {\n      setErrorUserName(\"Username required\");\n    }\n    if (!userLogin.password) {\n      setErrorPW(\"Password is required\");\n    } else if (userLogin.password.length < 6) {\n      setErrorPW(\"Password needs to be 6 characters or more\");\n    } else {\n      setIsSubmit(true);\n    }\n  };\n  \n    if(!props.show){\n      return null;\n    }else{\n      return (\n    \n    <>\n      <div className=\"formlg-overlay\">\n      <div className=\"formlg-container\">\n        <span className=\"close-btn\" onClick={props.onClose}>\n          Ã—\n        </span>\n        <div className=\"formlg-content-left\">\n          <img className=\"formlg-img\" src={fear} alt=\"space people\" />\n        </div>\n        <div className=\"formlg-content-right\">\n          <form onSubmit={handleOnSubmit} className=\"formlg\">\n            <div className=\"formlg-title\">\n              <h1>User Login</h1>\n              <h3>Welcome to the website</h3>\n              {<p>{errorServer}</p>}\n            </div>\n            <div className=\"formlg-inputs\">\n              <label className=\"formlg-label\">Username</label>\n              <input\n                className=\"form-input\"\n                name=\"username\"\n                placeholder=\"email or username\"\n                // value= {this.state.username}\n                onChange={handleOnChange}\n              />\n              {<p>{errorUserName}</p>}\n            </div>\n            <div className=\"formlg-inputs\">\n              <label className=\"formlg-label\">Password</label>\n              <input\n                className=\"formlg-input\"\n                type=\"password\"\n                name=\"password\"\n                placeholder=\"enter your password\"\n                // value= {this.state.password}\n                onChange={handleOnChange}\n              />\n              {<p>{errorPW}</p>}\n            </div>\n            <button className=\"formlg-input-btn\" type=\"submit\">\n              Sign in\n            </button>\n            <span className=\"formlg-input-fgpw\">Forgot Password?</span>\n          </form>\n        </div>\n      </div>\n    </div>\n    </>);\n    }\n  \n};"]},"metadata":{},"sourceType":"module"}