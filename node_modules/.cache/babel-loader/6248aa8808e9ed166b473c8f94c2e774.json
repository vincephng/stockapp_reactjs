{"ast":null,"code":"import _regeneratorRuntime from \"/Users/vinceng/Downloads/Code Place /stock_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/vinceng/Downloads/Code Place /stock_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/vinceng/Downloads/Code Place /stock_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/vinceng/Downloads/Code Place /stock_react/src/component/UserPageContent.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport axios from 'axios';\nimport React, { useState, useEffect } from 'react';\nimport { iex } from '../config/iex';\n\nvar UserPageContent = function UserPageContent() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      content = _useState2[0],\n      setContent = _useState2[1];\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            axios.defaults.withCredentials = true;\n            _context.next = 3;\n            return axios.get(\"http://localhost:3001/app/user/data\").then(function (res) {\n              var arr = res.data.user.symbolStock;\n\n              if (arr.length !== 0) {\n                getStockContent(res);\n              } else {\n                return;\n              }\n            }).catch(function (err) {\n              return console.log(err);\n            });\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), []);\n\n  var getStockContent = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(arr) {\n      var array, tickers, _iterator, _step, ticker, Url;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              array = arr.data.user.symbolStock;\n              tickers = '';\n              _iterator = _createForOfIteratorHelper(array);\n\n              try {\n                for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                  ticker = _step.value;\n                  tickers += ticker.trim() + ',';\n                }\n              } catch (err) {\n                _iterator.e(err);\n              } finally {\n                _iterator.f();\n              }\n\n              Url = iex.base_url + tickers + iex.typeQuote + iex.api_key_vinc3;\n              axios.defaults.withCredentials = false;\n              _context2.next = 8;\n              return axios.get(Url).then(function (res) {\n                return putObjToArr(res.data);\n              }).catch(function (err) {\n                return console.log(err);\n              });\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getStockContent(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var putObjToArr = function putObjToArr(obj) {\n    var arr = [];\n    console.log(obj);\n\n    for (var _i = 0, _Object$entries = Object.entries(obj); _i < _Object$entries.length; _i++) {\n      var _ref5 = _Object$entries[_i];\n\n      var _ref4 = _slicedToArray(_ref5, 1);\n\n      var key = _ref4[0];\n      arr.push(obj[key]);\n    }\n\n    setContent(arr);\n  };\n\n  var handleRemoveTicker = /*#__PURE__*/function () {\n    var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(remove) {\n      var ticker;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              ticker = {\n                ticker: remove.target.value\n              };\n              axios.defaults.withCredentials = true;\n              _context3.next = 4;\n              return axios.post(\"http://localhost:3001/stock/app/removeTicker\", ticker).then(function (res) {\n                return console.log(res);\n              }).catch(function (err) {\n                return console.log(err);\n              });\n\n            case 4:\n              window.location.reload();\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleRemoveTicker(_x2) {\n      return _ref6.apply(this, arguments);\n    };\n  }();\n\n  if (content.length !== 0) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, content.map(function (obj) {\n      var percentChange = obj.quote.changePercent.toFixed(3);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card\",\n        key: obj.quote.symbol,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: \"./images/assassins.png\",\n        alt: \"\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-info\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        value: obj.quote.symbol,\n        onClick: handleRemoveTicker,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 17\n        }\n      }, \"Remove\"), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 17\n        }\n      }, obj.quote.symbol, \" (\", obj.quote.changePercent < 0 ? /*#__PURE__*/React.createElement(\"p\", {\n        className: \"percent-down\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 69\n        }\n      }, \"\\u25BC \", percentChange, \" %\") : /*#__PURE__*/React.createElement(\"p\", {\n        className: \"percent-up\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 18\n        }\n      }, \" \\u25B2 \", percentChange, \" %\"), \")\"), /*#__PURE__*/React.createElement(\"p\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 17\n        }\n      }, obj.quote.companyName)), /*#__PURE__*/React.createElement(\"h2\", {\n        className: \"price\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 15\n        }\n      }, \"$\", obj.quote.latestPrice));\n    }));\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"no-content\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 20\n      }\n    }, /*#__PURE__*/React.createElement(\"h3\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 48\n      }\n    }, \"Nothing to show. Please use search bar to add your stock\"));\n  }\n};\n\nexport default UserPageContent;","map":{"version":3,"sources":["/Users/vinceng/Downloads/Code Place /stock_react/src/component/UserPageContent.js"],"names":["axios","React","useState","useEffect","iex","UserPageContent","content","setContent","defaults","withCredentials","get","then","res","arr","data","user","symbolStock","length","getStockContent","catch","err","console","log","array","tickers","ticker","trim","Url","base_url","typeQuote","api_key_vinc3","putObjToArr","obj","Object","entries","key","push","handleRemoveTicker","remove","target","value","post","window","location","reload","map","percentChange","quote","changePercent","toFixed","symbol","companyName","latestPrice"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport React, {useState,useEffect} from 'react'\nimport {iex} from '../config/iex'\n\n\nconst UserPageContent = () =>{\n  const [content, setContent] = useState([])\n  useEffect(async() => {\n    axios.defaults.withCredentials = true;\n    await axios\n      .get(\"http://localhost:3001/app/user/data\")\n      .then((res) => {\n        const arr =res.data.user.symbolStock\n        if (arr.length !== 0){\n          getStockContent(res)\n        }else{\n          return\n        }\n      })\n      .catch((err) => console.log(err)); \n    \n  }, [])\n  const getStockContent = async(arr) =>{\n    const array = arr.data.user.symbolStock \n    let tickers = ''\n    for(let ticker of array ){\n      tickers += ticker.trim() + ',';\n    }\n    const Url = iex.base_url + tickers + iex.typeQuote + iex.api_key_vinc3\n    axios.defaults.withCredentials = false;\n    await axios.get(Url)\n                .then(res => putObjToArr(res.data))\n                .catch(err => console.log(err))  \n  }\n  const putObjToArr = (obj)=>{\n    let arr = []\n    console.log(obj)\n    for(let [key] of Object.entries(obj)){\n      arr.push(obj[key])\n    }\n    setContent(arr)\n  }\n  const handleRemoveTicker = async(remove) =>{\n    const ticker = {ticker:remove.target.value}\n    axios.defaults.withCredentials = true;\n    await axios.post(\"http://localhost:3001/stock/app/removeTicker\",ticker)\n         .then(res =>console.log(res))\n         .catch(err => console.log(err))\n    window.location.reload()\n  }\n  if(content.length !== 0){\n    return(<>{\n          content.map(obj =>{\n            const percentChange = obj.quote.changePercent.toFixed(3)\n            return( <div className=\"card\" key={obj.quote.symbol}>\n              <img src=\"./images/assassins.png\" alt=\"\" />\n              <div className=\"card-info\">\n                <button value={obj.quote.symbol} onClick={handleRemoveTicker}>Remove</button>\n                <h2>{obj.quote.symbol} ({obj.quote.changePercent<0?(<p className=\"percent-down\">&#9660; {percentChange} %</p>) :\n                (<p className=\"percent-up\"> &#9650; {percentChange} %</p>)})</h2> \n                <p>{obj.quote.companyName}</p>\n                {/* <div className=\"progress\"></div> */}\n              </div>\n              <h2 className=\"price\">${obj.quote.latestPrice}</h2>\n              \n            </div>) \n        }) \n      }</>) }else{\n            return(<div className=\"no-content\"><h3>Nothing to show. Please use search bar to add your stock</h3></div>)\n        }\n}\n\nexport default UserPageContent;"]},"metadata":{},"sourceType":"module"}