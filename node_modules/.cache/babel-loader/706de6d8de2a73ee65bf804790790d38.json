{"ast":null,"code":"import _regeneratorRuntime from \"/Users/vinceng/Downloads/Code Place /stock_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/vinceng/Downloads/Code Place /stock_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/vinceng/Downloads/Code Place /stock_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/Users/vinceng/Downloads/Code Place /stock_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/vinceng/Downloads/Code Place /stock_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/vinceng/Downloads/Code Place /stock_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/vinceng/Downloads/Code Place /stock_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/vinceng/Downloads/Code Place /stock_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/vinceng/Downloads/Code Place /stock_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/vinceng/Downloads/Code Place /stock_react/client/src/component/FormSignUp.js\";\nimport React, { Component } from \"react\";\nimport \"../style/formSignUp.css\";\nimport stock_pic from \"../pics/thinking.jpg\";\nimport axios from \"axios\";\nimport work from \"../pics/Work_6.jpg\";\nimport Login from \"../component/Login\";\nimport { Link } from \"react-router-dom\";\n\nvar FormSignUP = /*#__PURE__*/function (_Component) {\n  _inherits(FormSignUP, _Component);\n\n  function FormSignUP(props) {\n    var _this;\n\n    _classCallCheck(this, FormSignUP);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(FormSignUP).call(this, props));\n\n    _this.handleOnChange = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n        var name, value;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                name = event.target.name;\n                value = event.target.value;\n                _context.next = 4;\n                return _this.setState({\n                  userInfo: _objectSpread({}, _this.state.userInfo, _defineProperty({}, name, value)),\n                  errors: {}\n                });\n\n              case 4:\n                console.log(_this.state);\n                console.log(_this.checkInput());\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleOnSubmit = function (submit) {\n      submit.preventDefault();\n      var userForm = _this.state.userInfo;\n      delete userForm['password2'];\n      console.log(userForm);\n\n      _this.setState({\n        errors: _this.checkInput()\n      });\n\n      if (_this.state.isSubmit) {\n        axios.defaults.withCredentials = true;\n        axios.post(\"http://localhost:3001/stock/app/signup\", userForm).then(function (res) {\n          _this.setState({\n            isChange: true\n          });\n\n          _this.sendEmail();\n        }).catch(function (err) {\n          return _this.setState({\n            errorsServer: err.response.data.message,\n            userInfo: _objectSpread({}, _this.state.userInfo, {\n              password: \"\",\n              password2: \"\"\n            })\n          });\n        });\n      }\n    };\n\n    _this.state = {\n      userInfo: {\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        password2: \"\"\n      },\n      isSubmit: false,\n      isChange: false,\n      errors: {// username: '',\n        // email: '',\n        // password:'',\n        // password2: ''\n      },\n      errorsServer: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(FormSignUP, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.setState({\n        isChange: false\n      });\n    }\n  }, {\n    key: \"sendEmail\",\n    value: function sendEmail() {\n      var emailInfo = {\n        email: this.state.userInfo.email,\n        username: this.state.userInfo.username\n      };\n      console.log(emailInfo);\n      axios.post(\"http://localhost:3001/stock/app/sendEmail\", emailInfo).then(function (res) {\n        return console.log(res);\n      }).catch(function (err) {\n        return console.log(err);\n      });\n    }\n  }, {\n    key: \"checkInput\",\n    value: function checkInput() {\n      var errors = {};\n\n      if (!this.state.userInfo.username.trim()) {\n        errors.username = \"Username required\";\n      }\n\n      if (!this.state.userInfo.email) {\n        errors.email = \"Email required\";\n      } else if (!/\\S+@\\S+\\.\\S+/.test(this.state.userInfo.email)) {\n        errors.email = \"Email address is invalid\";\n      }\n\n      if (!this.state.userInfo.password) {\n        errors.password = \"Password is required\";\n      } else if (this.state.userInfo.password.length < 6) {\n        errors.password = \"Password needs to be 6 characters or more\";\n      }\n\n      if (!this.state.userInfo.password2) {\n        errors.password2 = \"Password is required\";\n      } else if (this.state.userInfo.password2 !== this.state.userInfo.password) {\n        errors.password2 = \"Passwords do not match\";\n      } else {\n        this.setState({\n          isSubmit: true\n        });\n      }\n\n      return errors;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var changeForm = this.state.isChange;\n\n      if (!this.props.show) {\n        return null;\n      } else {\n        return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-container\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"close-btn\",\n          onClick: this.props.onClose,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }\n        }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-content-left\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          className: \"form-img\",\n          src: stock_pic,\n          alt: \"people hike\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }\n        })), !changeForm ? /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-content-right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"form\", {\n          onSubmit: this.handleOnSubmit,\n          className: \"form\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"h1\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 19\n          }\n        }, \"Get started with me today! Create your account by filling out the information below.\"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 20\n          }\n        }, this.state.errorsServer), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-inputs\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          className: \"form-label\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 21\n          }\n        }, \"Username\"), /*#__PURE__*/React.createElement(\"input\", {\n          className: \"form-input\",\n          type: \"text\",\n          name: \"username\",\n          placeholder: \"Enter your username\",\n          value: this.state.userInfo.username,\n          onChange: this.handleOnChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 22\n          }\n        }, this.state.errors.username)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-inputs\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          className: \"form-label\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 21\n          }\n        }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n          className: \"form-input\",\n          type: \"email\",\n          name: \"email\",\n          placeholder: \"Enter your email\",\n          value: this.state.userInfo.email,\n          onChange: this.handleOnChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 22\n          }\n        }, this.state.errors.email)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-inputs\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          className: \"form-label\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 21\n          }\n        }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n          className: \"form-input\",\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"Enter your password\",\n          value: this.state.userInfo.password,\n          onChange: this.handleOnChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 22\n          }\n        }, this.state.errors.password)), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-inputs\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"label\", {\n          className: \"form-label\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 21\n          }\n        }, \"Confirm Password\"), /*#__PURE__*/React.createElement(\"input\", {\n          className: \"form-input\",\n          type: \"password\",\n          name: \"password2\",\n          placeholder: \"Confirm your password\",\n          value: this.state.userInfo.password2,\n          onChange: this.handleOnChange,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 21\n          }\n        }), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 22\n          }\n        }, this.state.errors.password2)), /*#__PURE__*/React.createElement(\"button\", {\n          className: \"form-input-btn\",\n          type: \"submit\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 19\n          }\n        }, \"Sign up\"), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-footer\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          className: \"form-input-login\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 21\n          }\n        }, \"Already have an account? Please login.\")))) : /*#__PURE__*/React.createElement(\"div\", {\n          className: \"form-content-right\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(\"h1\", {\n          className: \"form-success\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 17\n          }\n        }, \"We have received your request!\"), /*#__PURE__*/React.createElement(\"img\", {\n          className: \"form-img-2\",\n          src: work,\n          alt: \"success-image\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 17\n          }\n        }))));\n      }\n    }\n  }]);\n\n  return FormSignUP;\n}(Component);\n\nexport { FormSignUP as default };","map":{"version":3,"sources":["/Users/vinceng/Downloads/Code Place /stock_react/client/src/component/FormSignUp.js"],"names":["React","Component","stock_pic","axios","work","Login","Link","FormSignUP","props","handleOnChange","event","name","target","value","setState","userInfo","state","errors","console","log","checkInput","handleOnSubmit","submit","preventDefault","userForm","isSubmit","defaults","withCredentials","post","then","res","isChange","sendEmail","catch","err","errorsServer","response","data","message","password","password2","username","email","emailInfo","trim","test","length","changeForm","show","onClose"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../style/formSignUp.css\";\nimport stock_pic from \"../pics/thinking.jpg\";\nimport axios from \"axios\";\nimport work from \"../pics/Work_6.jpg\";\nimport Login from \"../component/Login\";\nimport { Link } from \"react-router-dom\";\n\nexport default class FormSignUP extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      userInfo: {\n        username: \"\",\n        email: \"\",\n        password: \"\",\n        password2: \"\",\n      },\n      isSubmit: false,\n      isChange: false,\n      errors: {\n        // username: '',\n        // email: '',\n        // password:'',\n        // password2: ''\n      },\n      errorsServer: \"\"\n    };\n  }\n  componentDidMount(){\n    this.setState({isChange: false})\n  }\n  handleOnChange = async (event) => {\n    const name = event.target.name;\n    const value = event.target.value;\n    await this.setState({\n      userInfo: { ...this.state.userInfo, [name]: value },\n      errors: {},\n    });\n    console.log(this.state);\n\n    console.log(this.checkInput());\n  };\n  handleOnSubmit = (submit) => {\n    submit.preventDefault();\n    let userForm = this.state.userInfo;\n    delete userForm['password2'];\n    console.log(userForm)\n    this.setState({ errors: this.checkInput() });\n    if (this.state.isSubmit) {\n      axios.defaults.withCredentials = true;\n      axios\n        .post(\"http://localhost:3001/stock/app/signup\", userForm)\n        .then(res =>  {\n          this.setState({ isChange: true })\n          this.sendEmail()\n        })\n        .catch(err => this.setState({ \n          errorsServer: err.response.data.message,\n          userInfo: { ...this.state.userInfo,password:\"\", password2:\"\" }\n         }));\n    }\n  };\n  sendEmail(){\n    let emailInfo = {email: this.state.userInfo.email, username:this.state.userInfo.username}\n    console.log(emailInfo)\n    axios.post(\"http://localhost:3001/stock/app/sendEmail\", emailInfo)\n         .then(res => (console.log(res)))\n         .catch(err => console.log(err))\n  }\n  checkInput() {\n    let errors = {};\n\n    if (!this.state.userInfo.username.trim()) {\n      errors.username = \"Username required\";\n    }\n    if (!this.state.userInfo.email) {\n      errors.email = \"Email required\";\n    } else if (!/\\S+@\\S+\\.\\S+/.test(this.state.userInfo.email)) {\n      errors.email = \"Email address is invalid\";\n    }\n    if (!this.state.userInfo.password) {\n      errors.password = \"Password is required\";\n    } else if (this.state.userInfo.password.length < 6) {\n      errors.password = \"Password needs to be 6 characters or more\";\n    }\n\n    if (!this.state.userInfo.password2) {\n      errors.password2 = \"Password is required\";\n    } else if (this.state.userInfo.password2 !== this.state.userInfo.password) {\n      errors.password2 = \"Passwords do not match\";\n    } else {\n      this.setState({ isSubmit: true });\n    }\n    return errors;\n  }\n\n  render() {\n    const changeForm = this.state.isChange;\n    if (!this.props.show) {\n      return null;\n    } else {\n      return (\n        <>\n          <div className=\"form-container\">\n            <span className=\"close-btn\" onClick={this.props.onClose}>\n              Ã—\n            </span>\n            <div className=\"form-content-left\">\n              <img className=\"form-img\" src={stock_pic} alt=\"people hike\" />\n            </div>\n            {!changeForm ? (\n              <div className=\"form-content-right\">\n                <form onSubmit={this.handleOnSubmit} className=\"form\">\n                  <h1>\n                    Get started with me today! Create your account by filling\n                    out the information below.\n                  </h1>\n                  {<p>{this.state.errorsServer}</p>}\n                  <div className=\"form-inputs\">\n                    <label className=\"form-label\">Username</label>\n                    <input\n                      className=\"form-input\"\n                      type=\"text\"\n                      name=\"username\"\n                      placeholder=\"Enter your username\"\n                      value={this.state.userInfo.username}\n                      onChange={this.handleOnChange}\n                    />\n                    {<p>{this.state.errors.username}</p>}\n                  </div>\n                  <div className=\"form-inputs\">\n                    <label className=\"form-label\">Email</label>\n                    <input\n                      className=\"form-input\"\n                      type=\"email\"\n                      name=\"email\"\n                      placeholder=\"Enter your email\"\n                      value={this.state.userInfo.email}\n                      onChange={this.handleOnChange}\n                    />\n                    {<p>{this.state.errors.email}</p>}\n                  </div>\n                  <div className=\"form-inputs\">\n                    <label className=\"form-label\">Password</label>\n                    <input\n                      className=\"form-input\"\n                      type=\"password\"\n                      name=\"password\"\n                      placeholder=\"Enter your password\"\n                      value={this.state.userInfo.password}\n                      onChange={this.handleOnChange}\n                    />\n                    {<p>{this.state.errors.password}</p>}\n                  </div>\n                  <div className=\"form-inputs\">\n                    <label className=\"form-label\">Confirm Password</label>\n                    <input\n                      className=\"form-input\"\n                      type=\"password\"\n                      name=\"password2\"\n                      placeholder=\"Confirm your password\"\n                      value={this.state.userInfo.password2}\n                      onChange={this.handleOnChange}\n                    />\n                    {<p>{this.state.errors.password2}</p>}\n                  </div>\n                  <button className=\"form-input-btn\" type=\"submit\">\n                    Sign up\n                  </button>\n                  <div className=\"form-footer\">\n                    <span className=\"form-input-login\">\n                      Already have an account? Please login.\n                    </span>\n                  </div>\n                </form>\n              </div>\n            ) : (\n              <div className=\"form-content-right\">\n                <h1 className=\"form-success\">We have received your request!</h1>\n                <img className=\"form-img-2\" src={work} alt=\"success-image\" />\n              </div>\n            )}\n          </div>\n        </>\n      );\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}